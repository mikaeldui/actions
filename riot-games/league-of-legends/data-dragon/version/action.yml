# uses: mikaeldui/actions/riot-games/league-of-legends/data-dragon/version@main
name: 'Data Dragon Version'
description: 'Get the latest version number of Data Dragon'
outputs:
  version: 
    description: 'The latest version number'
    value: ${{ steps.version.outputs.result }}    

runs:
  using: "composite"
  steps:  
    - name: Get the description
      if: ${{ inputs.description == null }}
      id: version
      uses: actions/github-script@v5
      with:
        result-encoding: string
        script: |
          var request = require('request');        
          return request.get({
            url: 'https://ddragon.leagueoflegends.com/api/versions.json',
            json: true,
            headers: {'User-Agent': 'GitHubActions/main (https://github.com/mikaeldui/actions/tree/main/riot-games/league-of-legends/data-dragon/version)'}
          }, (err, res, data) => {
            if (err) {
              console.log('Error:', err);
            } else if (res.statusCode !== 200) {
              console.log('Status:', res.statusCode);
            } else {
              // data is already parsed as JSON:
              return data[0];
            }
         });
